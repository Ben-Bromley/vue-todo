import{o as l,c as d,F as m,e as x,z as D,x as $,p as k,f as B,a,t as u,m as E,r as h,A as I,B as T,b,u as p}from"./vendor.098df5e6.js";import{_ as v}from"./index.f7e29782.js";class S{constructor(e,s){[this.pegs,this.holes]=this.generateBoard(),this.config={draggingEnabled:!0},e.value=this.pegs,s.draggingEnabled=this.config.draggingEnabled}generateBoard(){let e=[],s=[];for(let t=1;t<33;t++)e.push({id:t,position:t<=16?t:t+1});for(let t=1;t<=33;t++){let i={id:t};i.id<7||i.id>27?i.x=i.id%3===0?5:i.id%3+2:i.x=i.id%7+1,i.y=1,i.id>3&&i.y++,i.id>6&&i.y++,i.id>13&&i.y++,i.id>20&&i.y++,i.id>27&&i.y++,i.id>30&&i.y++,i.id>33&&i.y++,s.push(i)}return[e,s]}reset(e){return[this.pegs,this.holes]=this.generateBoard(),e.value=this.pegs}toggleDragging(e){return this.config.draggingEnabled=!this.config.draggingEnabled,e.draggingEnabled=this.config.draggingEnabled}filterPegsForBoard(e,s){return this.pegs=s.value,this.pegs.filter(t=>t.position==e)}getPegByHoleID(e){return this.pegs.find(t=>t.position==e)}getPegByPegID(e){return this.pegs.find(t=>t.id==e)}getHoleByPegPosition(e){return this.holes.find(s=>s.id==e)}startDrag(e,s){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("pegID",s.id)}onDrop(e,s,t){this.pegs=t.value;const i=e.dataTransfer.getData("pegID"),o=this.getPegByPegID(i),n=this.getHoleByPegPosition(o.position),y=this.getPegByHoleID(s.id);if(((n.x+2==s.x||n.x-2==s.x)&&n.y==s.y||(n.y+2==s.y||n.y-2==s.y)&&n.x==s.x)&&!y){let c=this.getJumpedPeg(n,s);c&&(o.position=s.id,this.pegs=this.pegs.filter(P=>P.id!=c.id))}return t.value=this.pegs}getJumpedPeg(e,s){let t={x:(e.x+s.x)/2,y:(e.y+s.y)/2},i=this.holes.find(o=>o.x===t.x&&o.y===t.y);return this.getPegByHoleID(i.id)}checkAdjacentPegs(e){let s=0,t=!1;return this.pegs.forEach(i=>{let o=this.getHoleByPegPosition(i.position),n=this.getHoleByPegPosition(e.position);(o.y===n.y-1&&o.x===n.x||o.y===n.y+1&&o.x===n.x||o.x===n.x-1&&o.y===n.y||o.x===n.x+1&&o.y===n.y)&&(s++,t=!0)}),[t,s]}checkGameOver(e){return this.pegs=e.value,this.gameOver=!0,this.pegs.forEach(s=>{let[t,i]=this.checkAdjacentPegs(s);t&&(this.gameOver=!1)}),this.gameOver}}const C={},R={class:"peg"};function j(r,e){return l(),d("div",R)}var A=v(C,[["render",j]]);const f=r=>(k("data-v-e1195472"),r=r(),B(),r),O={id:"peg-grid"},w=f(()=>a("span",{id:"c1",class:"corner"},null,-1)),G=f(()=>a("span",{id:"c2",class:"corner"},null,-1)),F=f(()=>a("span",{id:"c3",class:"corner"},null,-1)),N=f(()=>a("span",{id:"c4",class:"corner"},null,-1)),V=["onDrop"],H={props:["game","myRefs","options"],setup(r){const e=r;return(s,t)=>(l(),d("section",O,[w,G,F,N,(l(!0),d(m,null,x(e.game.holes,i=>(l(),d("div",{class:"hole",key:i.id,onDrop:o=>e.game.onDrop(o,i,e.myRefs.pegs),onDragenter:t[0]||(t[0]=D(()=>{},["prevent"])),onDragover:t[1]||(t[1]=D(()=>{},["prevent"]))},[(l(!0),d(m,null,x(e.game.filterPegsForBoard(i.id,e.myRefs.pegs),o=>(l(),$(A,{key:o.id,class:"pin",draggable:e.options.draggingEnabled,onDragstart:n=>e.game.startDrag(n,o,e.myRefs.pegs)},null,8,["draggable","onDragstart"]))),128))],40,V))),128))]))}};var J=v(H,[["__scopeId","data-v-e1195472"]]);const M={key:0,class:"modal-container"},W={class:"modal-inner"},z={class:"button-container"},L={props:["title","message","show","primaryText","secondaryText"],setup(r){const e=r;return(s,t)=>e.show?(l(),d("section",M,[a("div",W,[a("div",null,[a("h1",null,u(e.title),1)]),a("p",null,u(e.message),1),a("div",z,[a("button",{onClick:t[0]||(t[0]=i=>s.$emit("primary"))},u(e.primaryText),1),a("button",{onClick:t[1]||(t[1]=i=>s.$emit("secondary"))},"Close")])])])):E("",!0)}};const q=r=>(k("data-v-571f770b"),r=r(),B(),r),K=q(()=>a("section",null,[a("div",null,[a("h1",{align:"center"},"Pocket Solitaire")])],-1)),Q={id:"game-buttons"},U={setup(r){const e=h([]),s=I({draggingEnabled:!1}),t=h(!1),i=h(!1),o={pegs:e},n=new S(o.pegs,s),y=()=>{c(),n.reset(o.pegs)},c=()=>{t.value=!1};return T(()=>{i.value=n.checkGameOver(o.pegs),i.value===!0&&setTimeout(()=>{t.value=!0},350)}),(P,g)=>(l(),d(m,null,[b(L,{show:t.value,title:"Game Over",message:"Would you like to play again?",primaryText:"Play Again",onPrimary:g[0]||(g[0]=_=>y()),onSecondary:g[1]||(g[1]=_=>c())},null,8,["show"]),K,b(J,{game:p(n),myRefs:o,options:p(s)},null,8,["game","options"]),a("section",Q,[a("button",{onClick:g[2]||(g[2]=_=>p(n).reset(o.pegs))},"Reset"),a("button",{onClick:g[3]||(g[3]=_=>p(n).toggleDragging(p(s)))},u(p(s).draggingEnabled?"Pause":"Play"),1)])],64))}};var Z=v(U,[["__scopeId","data-v-571f770b"]]);export{Z as default};
